<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barbecue y Algo M√°s | Men√∫ Digital</title>
    
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <nav class="navbar">
        <div class="container nav-container">
            <a href="#" class="logo">
				<img src="logo.webp" alt="BBQ y Algo M√°s" class="logo-img">
			</a>
            <ul class="nav-links">
                <li><a href="#alitas">Alitas</a></li>
                <li><a href="#costillas">Costillas</a></li>
                <li><a href="#hamburguesas">Hamburguesas</a></li>
                <li><a href="#otros">Papas y M√°s</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
        </div>
    </nav>



	<header class="hero">
		<div class="hero-carousel">
            <div class="hero-slide active" style="background-image: url('img/1.jpg');"></div>

            <div class="hero-slide" style="background-image: url('img/2.jpg');"></div>

            <div class="hero-slide" style="background-image: url('img/3.jpg');"></div>

            <div class="overlay-gradient"></div>
        </div>

		<div class="hero-content">
			
			<h1>Alitas realmente <span class="highlight">sabrosas...</span><br>Sabor incomparable.</h1>
			<p>Alitas | Costillas | Hamburguesas | Papas</p>
			
			<div class="hero-buttons">
				<a href="#menu-start" class="btn-primary">Ver Men√∫</a>
				<a href="https://maps.app.goo.gl/FaupKrAg7nN9fAQs7" class="btn-secondary">Ubicaci√≥n</a>
			</div>
			
			<div class="carousel-controls">
				<button class="carousel-btn prev-btn"><i class="fas fa-arrow-left"></i></button>
				<button class="carousel-btn next-btn"><i class="fas fa-arrow-right"></i></button>
			</div>
		</div>
	</header>


    <div class="iva-note" id="menu-start">
        <p><i class="fas fa-info-circle"></i> Nota: Los precios mostrados en el men√∫ <strong>NO incluyen IVA</strong>. Se a√±adir√° un 15% de IVA en su factura final.</p>
    </div>

    <main class="container menu-container">

        <section id="alitas" class="menu-section">
            <h2 class="section-title">Alitas y Combos üçó</h2>
            <p class="section-subtitle">¬°Alitas realmente sabrosas! Nuevos sabores: Frutos Rojos y Super Picante.</p>
            
            <div class="salsa-info">
                <p><strong>Salsas disponibles:</strong> BBQ, BBQ Picante, Miel y Mostaza, Jack Daniels, Maracuy√°, Frutos Rojos, Super Picante. (Salsa adicional: $0.75)</p>
            </div>

            <div class="menu-grid">
                <div class="menu-item">
                    <h3>Combo 3 alitas</h3>
                    <p>3 alitas + 125 gr de papa + 1 salsa</p>
                    <span class="price">$3.50</span>
                </div>
                <div class="menu-item">
                    <h3>Combo 6 alitas</h3>
                    <p>6 alitas + 200 gr de papa + 1 salsa</p>
                    <span class="price">$4.99</span>
                </div>
                <div class="menu-item">
                    <h3>Solo Alitas (8)</h3>
                    <p>8 alitas sin papas + 2 salsas</p>
                    <span class="price">$5.50</span>
                </div>
                <div class="menu-item">
                    <h3>Combo 12 alitas</h3>
                    <p>12 alitas + 200 gr de papa + 2 salsas</p>
                    <span class="price">$8.99</span>
                </div>
                <div class="menu-item">
                    <h3>Combo 18 alitas</h3>
                    <p>18 alitas + 200 gr de papa + 2 salsas</p>
                    <span class="price">$12.99</span>
                </div>
                <div class="menu-item">
                    <h3>Combo 24 alitas</h3>
                    <p>24 alitas + 325 gr de papa + 3 salsas</p>
                    <span class="price">$16.99</span>
                </div>
                <div class="menu-item">
                    <h3>Combo 30 alitas</h3>
                    <p>30 alitas + 400 gr de papa + 3 salsas</p>
                    <span class="price">$20.50</span>
                </div>
                <div class="menu-item featured">
                    <h3>Combo 40 alitas</h3>
                    <p>40 alitas + 500 gr de papa + 4 salsas</p>
                    <span class="price">$28.00</span>
                </div>
            </div>
        </section>

        <section id="costillas" class="menu-section alternate-bg">
            <h2 class="section-title">Costillas üçñ</h2>
            <p class="section-subtitle">Sabor incomparable...</p>
            
            <div class="menu-grid">
                <div class="menu-item">
                    <h3>Costilla Cl√°sica</h3>
                    <p>250g costilla de cerdo + 200g papas + 1 salsa</p>
                    <span class="price">$6.99</span>
                </div>
                <div class="menu-item">
                    <h3>Solo Costilla</h3>
                    <p>250g costilla de cerdo SIN papa + 1 salsa</p>
                    <span class="price">$5.75</span>
                </div>
                <div class="menu-item featured">
                    <h3>Costialitas (Mixto)</h3>
                    <p>250g costilla de cerdo + 4 alitas + 250g papas + 2 salsas</p>
                    <span class="price">$9.99</span>
                </div>
                <div class="menu-item">
                    <h3>Costillas para Dos</h3>
                    <p>2 porciones de 125g costilla + 8 alitas + 2 porciones de 200g papas + 2 salsas</p>
                    <span class="price">$12.50</span>
                </div>
            </div>
        </section>

        <section id="hamburguesas" class="menu-section">
            <h2 class="section-title">Hamburguesas üçî</h2>
            <p class="section-subtitle">De carne y de pollo. ¬°Pru√©balas todas!</p>

            <div class="menu-category-header"><h3>Res de la Casa</h3></div>
            <div class="menu-grid">
                <div class="menu-item">
                    <h3>Cl√°sica</h3>
                    <p>Carne, Queso + 50g papas</p>
                    <span class="price">$1.99</span>
                </div>
                <div class="menu-item">
                    <h3>Cl√°sica Especial</h3>
                    <p>Carne, Queso, Tocino + 50g papas</p>
                    <span class="price">$2.50</span>
                </div>
                 <div class="menu-item">
                    <h3>Hawiana</h3>
                    <p>Carne, Queso, Pi√±a + 50g papas</p>
                    <span class="price">$2.75</span>
                </div>
                <div class="menu-item">
                    <h3>Completa</h3>
                    <p>Carne, Queso, Huevo, Tocino + 50g papas</p>
                    <span class="price">$2.99</span>
                </div>
                <div class="menu-item">
                    <h3>Mega</h3>
                    <p>2 Carnes, Queso, Huevo, Tocino + 100g papas</p>
                    <span class="price">$3.99</span>
                </div>
                <div class="menu-item">
                    <h3>Ranchera</h3>
                    <p>3 Carnes, 2 Tocino, Queso, Huevo + 100g papas</p>
                    <span class="price">$4.50</span>
                </div>
                 <div class="menu-item">
                    <h3>Especial</h3>
                    <p>2 Carnes, Queso, Chorizo, Salsa a elecci√≥n + 100g papas</p>
                    <span class="price">$4.50</span>
                </div>
                 <div class="menu-item featured">
                    <h3>Choriburguer</h3>
                    <p>2 Carnes, 2 Chorizo, Queso, Tocino + 100g papas</p>
                    <span class="price">$4.50</span>
                </div>
            </div>

            <div class="menu-category-header" style="margin-top: 30px;"><h3>L√≠nea de Pollo y Mixtas</h3></div>
            <div class="menu-grid">
                 <div class="menu-item">
                    <h3>Pollo Normal</h3>
                    <p>Pollo, Queso + 50g papas</p>
                    <span class="price">$2.99</span>
                </div>
                 <div class="menu-item">
                    <h3>Pollo Doble</h3>
                    <p>2 Pollo, Tocino, Queso + 100g papas</p>
                    <span class="price">$4.50</span>
                </div>
                <div class="menu-item featured">
                    <h3>Pollo y Carne</h3>
                    <p>Pollo, Carne, Queso, Tocino + 100g papas</p>
                    <span class="price">$4.00</span>
                </div>
            </div>
        </section>

        

        <section id="papas" class="menu-section">
            <h2 class="section-title">Papas üçü</h2>
            <p class="section-subtitle">Nuevas formas de comer papitas. S√∫per crujientes.</p>

            <div class="menu-grid">

                

                <div class="menu-item">
                    <h3>Salchipapa</h3>
                    <p>Salchicha, queso + 200g papas</p>
                    <span class="price">$2.99</span>
                </div>

                <div class="menu-item">
                    <h3>Papipollo</h3>
                    <p>Trocitos de pollo crujiente + 200g papas</p>
                    <span class="price">$3.25</span>
                </div>

                <div class="menu-item">
                    <h3>Papicarne</h3>
                    <p>Trocitos de carne + 200g papas</p>
                    <span class="price">$3.75</span>
                </div>

                <div class="menu-item">
                    <h3>Papa Mixta</h3>
                    <p>Pollo o carne, salchicha, huevo + 250g papas</p>
                    <span class="price">$3.50</span>
                </div>

                <div class="menu-item featured">
                    <h3>Papa Mixta Especial</h3>
                    <p>6‚Äì8 trozos de pollo, tocino + 200g papas</p>
                    <span class="price">$3.25</span>
                </div>

                <div class="menu-item featured">
                    <h3>Papa Completa</h3>
                    <p>Carne, pollo, salchicha, huevo + 300g papas</p>
                    <span class="price">$4.50</span>
                </div>

                <div class="menu-item">
                    <h3>Papa Tocino</h3>
                    <p>Tocino, queso + 200g papas</p>
                    <span class="price">$2.99</span>
                </div>

                <div class="menu-item">
                    <h3>Porci√≥n de Papa</h3>
                    <p>200g de papas fritas</p>
                    <span class="price">$1.75</span>
                </div>


            </div>
        </section>

        <section id="hotdog" class="menu-section alternate-bg">
            <h2 class="section-title">Hot-Dogs üå≠</h2>
            <div class="menu-grid">
                <div class="menu-item">
                    <h3>Simple</h3>
                    <p>Chips, aderezos</p>
                    <span class="price">$1.99</span>
                </div>
                 <div class="menu-item">
                    <h3>Especial</h3>
                    <p>Chips, aderezos + 50g papa</p>
                    <span class="price">$2.50</span>
                </div>
                 <div class="menu-item featured">
                    <h3>Doble</h3>
                    <p>2 Salchichas, Queso, Tocino, Chips, aderezos + 100g papa</p>
                    <span class="price">$3.50</span>
                </div>
            </div>
        </section>
 
        

        <section id="otros" class="menu-section">
            <h2 class="section-title">Especiales y Extras üçüü•ó</h2>
            <p class="section-subtitle">Nuevas formas de comer papitas. S√∫per crujientes.</p>

            <div class="otros-layout">

                <!-- COLUMNA IZQUIERDA -->
                <div class="otros-left">
                    <div class="menu-item featured">
                        <h3>Ensalada C√©sar <span class="badge-new">Nuevo</span></h3>
                        <p>Lechuga crespa, tomate, pollo plancha, aderezo c√©sar, parmesano, crotones, vinagreta.</p>
                        <span class="price">$4.25</span>
                    </div>
                </div>

                <!-- COLUMNA DERECHA -->
                <div class="otros-right">
                    <h3 class="submenu-title">Extras</h3>

                    <div class="extras-buttons">
                        <button class="extra-btn" data-nombre="Crema" data-precio="0.75">
                            Crema <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Pi√±a" data-precio="0.75">
                            Pi√±a <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Queso" data-precio="0.75">
                            Queso <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Huevo" data-precio="0.75">
                            Huevo <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Tocino" data-precio="0.75">
                            Tocino <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Salchicha" data-precio="0.75">
                            Salchicha <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Salsa" data-precio="0.75">
                            Salsa <span>$0.75</span>
                        </button>

                        <button class="extra-btn" data-nombre="Carne" data-precio="1.50">
                            Carne <span>$1.50</span>
                        </button>

                        <button class="extra-btn" data-nombre="Pollo / Alas" data-precio="1.75">
                            Pollo / Alas <span>$1.75</span>
                        </button>
                    </div>
                </div>

            </div>
        </section>








        <section id="bebidas" class="menu-section alternate-bg">
            <h2 class="section-title">Bebidas y Batidos ü•§</h2>
            
            <div class="drinks-grid">
                <div class="drink-category">
                    <h3>Gaseosas y Agua</h3>
                        <div class="drinks-buttons">
                            <button class="drink-btn" data-nombre="Agua" data-precio="0.75">Agua <span>$0.75</span></button>
                            <button class="drink-btn" data-nombre="Gaseosa Personal CC" data-precio="0.85">Gaseosa Personal CC <span>$0.85</span></button>
                            <button class="drink-btn" data-nombre="Gaseosa Mediana CC" data-precio="1.10">Gaseosa Mediana CC <span>$1.10</span></button>
                            <button class="drink-btn" data-nombre="Fuzetea" data-precio="1.10">Fuzetea <span>$1.10</span></button>
                            <button class="drink-btn" data-nombre="Gaseosa Grande 1L CC" data-precio="1.85">Gaseosa Grande 1L CC <span>$1.85</span></button>
                            <button class="drink-btn" data-nombre="Fuzetea 1L" data-precio="1.85">Fuzetea 1L <span>$1.85</span></button>
                            <button class="drink-btn" data-nombre="Pepsi 2L" data-precio="2.00">Pepsi 2L <span>$2.00</span></button>
                        </div>
                </div>
                <div class="drink-category">
                    <h3>Jugos y Batidos</h3>
                    <p class="sabores">Sabores: Mora, Maracuy√°, Lim√≥n, Pi√±a, Frutilla, Guan√°bana, Coco (Nuevo).</p>
                    <div class="drinks-buttons">
                        <button class="drink-btn" data-sabor="true" data-nombre="Vaso Jugo 470ml" data-precio="1.50">Vaso Jugo (470ml) <span>$1.50</span></button>
                        <button class="drink-btn" data-sabor="true" data-nombre="Jugo Granizado 470ml" data-precio="2.00">Jugo Granizado (470ml) <span>$2.00</span></button>
                        <button class="drink-btn" data-sabor="true" data-nombre="Batido 470ml" data-precio="2.50">Batido (470ml) <span>$2.50</span></button>
                        <button class="drink-btn" data-sabor="true" data-nombre="Media Jarra Jugo" data-precio="2.50">Media Jarra Jugo <span>$2.50</span></button>
                        <button class="drink-btn" data-sabor="true" data-nombre="Jarra Jugo" data-precio="4.50">Jarra Jugo <span>$4.50</span></button>
                    </div>
                </div>
                 <div class="drink-category">
                        <h3>Bebidas Especiales</h3>
                        <div class="drinks-buttons">
                            <button class="drink-btn" data-nombre="Limonada de Coco" data-precio="2.00">Limonada de Coco <span>$2.00</span></button>
                            <button class="drink-btn" data-nombre="Milkshake" data-precio="2.50">Milkshake <span>$2.50</span></button>
                        </div>
                </div>
                <div class="drink-category">
                    <h3>Cervezas üç∫</h3>
                    <div class="drinks-buttons">
                        <button class="drink-btn" data-nombre="Pilsener 330ml" data-precio="1.75">Pilsener (330ml) <span>$1.75</span></button>
                        <button class="drink-btn" data-nombre="Club 330ml" data-precio="2.25">Club (330ml) <span>$2.25</span></button>
                        <button class="drink-btn" data-nombre="Corona" data-precio="2.75">Corona <span>$2.75</span></button>
                        <button class="drink-btn" data-nombre="Michelada" data-precio="3.25">Michelada <span>$3.25</span></button>
                        <button class="drink-btn" data-nombre="Pilsener 550ml" data-precio="2.50">Pilsener (550ml) <span>$2.50</span></button>
                        <button class="drink-btn" data-nombre="Club 550ml" data-precio="3.00">Club (550ml) <span>$3.00</span></button>
                        <button class="drink-btn" data-nombre="Promo Dos Micheladas" data-precio="6.00">Promo Dos Micheladas <span>$6.00</span></button>
                    </div>
                </div>
            </div>
        </section>
    </main>


    <section id="promociones" class="menu-section alternate-bg">
        <h2 class="section-title">
            üî• PROMOCIONES DEL D√çA
            <span id="promo-dia" style="font-size: 0.9em; font-weight: 400;"></span>
        </h2>

        <div class="menu-grid" id="promos-container">
            <!-- Promociones din√°micas -->
        </div>
    </section>




    <footer id="contacto">
        <div class="container footer-content">
            <div class="footer-column">
                <h3>Cont√°ctanos</h3>
                <p>
					<i class="fab fa-whatsapp"></i> 
					<a href="https://wa.me/593999058976" target="_blank">099 905 8976</a>
				</p>

				<p>
					<i class="fab fa-whatsapp"></i> 
					<a href="https://wa.me/593998064192" target="_blank">099 806 4192</a>
				</p>
                <p><i class="fas fa-envelope"></i> vale-s15@hotmail.com</p>
                <p class="delivery-note">Todos los pedidos para llevar tienen un valor adicional. ¬°P√≠delo a domicilio!</p>
            </div>
            <div class="footer-column">
				<h3>Ubicaci√≥n y Horario</h3>
				
				<p>
					<a href="https://www.google.com/maps/search/Av.+Venezuela+y+Padre+Germ√°n+Maya,+Santo+Domingo,+Ecuador" target="_blank" class="map-link">
						<i class="fas fa-map-marker-alt"></i> Av. Venezuela y Padre Germ√°n Maya, frente a la hamburguesa. Santo Domingo, Ecuador.
					</a>
				</p>

				<p><i class="far fa-clock"></i> Horario: 15h00 a 23h00</p>
			</div>
            <div class="footer-column">
                <h3>S√≠guenos y Pol√≠ticas</h3>
                <div class="social-icons">
                    <a href="https://facebook.com/barbecueyalgomas" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://instagram.com/barbecueyalgomas" target="_blank"><i class="fab fa-instagram"></i></a>
                </div>
                <p class="pet-friendly"><i class="fas fa-paw"></i> Trae a tu mascota con su correa.</p>
                <p>Todas las quejas y sugerencias son bienvenidas a nuestros tel√©fonos.</p>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 Barbecue y Algo M√°s. Todos los derechos reservados.</p>
        </div>
    </footer>
    
    <div id="pedido-box">
        <h3>üßæ Tu pedido</h3>
        <ul id="pedido-lista"></ul>
        <p id="pedido-total"><strong>Total:</strong> $0.00</p>
        <button id="enviar-whatsapp">
            <i class="fab fa-whatsapp"></i> Enviar por WhatsApp
        </button>
    </div>

    <div id="salsa-modal" class="modal">
        <div class="modal-content">
            <h3>Selecciona tus salsas</h3>
            <div id="salsa-opciones" class="salsa-grid"></div>

            <div class="modal-actions">
                <button id="cancelar-salsa">Cancelar</button>
                <button id="confirmar-salsa">Agregar</button>
            </div>
        </div>
    </div>
    <div id="sabor-modal" class="modal">
    <div class="modal-content">
            <h3>Elige el sabor</h3>
            <div id="sabor-opciones" class="salsa-grid">
                </div>

            <div class="modal-actions">
                <button id="cancelar-sabor">Cancelar</button>
                <button id="confirmar-sabor">Confirmar Sabor</button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slides = document.querySelectorAll('.hero-slide');
            const nextBtn = document.querySelector('.next-btn');
            const prevBtn = document.querySelector('.prev-btn');
            let currentSlide = 0;
            let slideInterval = setInterval(nextSlide, 5000); // Guardamos el timer en una variable

            function showSlide(index) {
                // Quitamos la clase active de la actual
                slides[currentSlide].classList.remove('active');
                
                // Actualizamos el √≠ndice (l√≥gica circular)
                currentSlide = index;
                if (currentSlide >= slides.length) {
                    currentSlide = 0; 
                } else if (currentSlide < 0) {
                    currentSlide = slides.length - 1;
                }

                // Ponemos la clase active en la nueva
                slides[currentSlide].classList.add('active');
            }

            function nextSlide() {
                showSlide(currentSlide + 1);
            }

            function prevSlide() {
                showSlide(currentSlide - 1);
            }

            // --- Eventos de los Botones ---
            nextBtn.addEventListener('click', function() {
                nextSlide();
                resetTimer(); // Reinicia el contador para que no cambie de golpe
            });

            prevBtn.addEventListener('click', function() {
                prevSlide();
                resetTimer();
            });

            // Funci√≥n para reiniciar el tiempo si el usuario toca un bot√≥n
            function resetTimer() {
                clearInterval(slideInterval);
                slideInterval = setInterval(nextSlide, 5000);
            }
        });




        // Agregar productos
        let pedido = [];
        let total = 0;
        let tipoPedido = null; // 'llevar' | 'local'
        let empaques = 0;
        const costoEmpaque = 0.25;

        function preguntarTipoPedido() {
            if (tipoPedido !== null) return;

            const respuesta = confirm(
                '¬øTu pedido es PARA LLEVAR?\n\nAceptar = Para llevar (se cobrar√° empaques)\nCancelar = Para servirse en el local'
            );

            tipoPedido = respuesta ? 'llevar' : 'local';
        }
        function obtenerEmpaquesPorProducto(item) {

            // ALITAS
            if (item.closest('#alitas')) {

                // Texto del <p>, ej: "3 alitas + 125 gr de papa + 1 salsa"
                const descripcion = item.querySelector('p')?.innerText || '';

                // Extraer n√∫mero antes de la palabra "alitas"
                const match = descripcion.match(/(\d+)\s*alitas/i);
                const cantidad = match ? parseInt(match[1]) : 0;

                if (cantidad >= 3 && cantidad <= 8) return 1;
                if (cantidad >= 9 && cantidad <= 18) return 2;
                if (cantidad >= 24) return 4;

                return 0;
            }

            // COSTILLAS
            if (item.closest('#costillas')) {

                // El tipo esta en el H3
                const titulo = item.querySelector('h3')?.innerText.toLowerCase() || '';

                // 1 empaque
                if (
                    titulo.includes('costilla cl√°sica') ||
                    titulo.includes('solo costilla')
                ) {
                    return 1;
                }

                // 2 empaques
                if (
                    titulo.includes('costialitas') || // OJO: asi esta en tu HTML
                    titulo.includes('para dos')
                ) {
                    return 2;
                }

                return 0;
            }

            // HAMBURGUESAS
            if (item.closest('#hamburguesas')) return 1;
            // Hot-dog
            if (item.closest('#hotdog')) return 1;
            // Papas
            if (item.closest('#papas')) return 1;
            // Promociones
            if (item.closest('#promociones')) {
                // Devuelve el n√∫mero guardado o 0 si no existe
                return parseInt(item.dataset.empaques) || 0;
            }

            return 0;
        }




        const salsasDisponibles = [
            'BBQ',
            'BBQ Picante',
            'Miel y Mostaza',
            'Jack Daniels',
            'Maracuy√°',
            'Frutos Rojos',
            'Super Picante'
        ];

        let productoPendiente = null;


        function calcularLimiteSalsas(nombreProducto) {
            const nombre = nombreProducto.toLowerCase();
            // --- REGLAS PARA PROMOCIONES ---
            if (nombre.includes('promoci√≥n')) {
                
                if (nombre.includes('promoci√≥n 1') || nombre.includes('promoci√≥n 2')) return 1;
                // Promo 3 (24 alitas) y Promo 4 (30 alitas) -> 3 salsas
                if (nombre.includes('promoci√≥n 3') || nombre.includes('promoci√≥n 4')) return 3;
                
                // Promo 5 (18 alitas) -> 2 salsas
                if (nombre.includes('promoci√≥n 5')) return 2;
                
                // Promo 1 y Promo 2 (tienen pocas alitas) -> 1 salsa
                return 1;
            }

            // L√≥gica para Costillas (basado en tu men√∫)
            if (nombre.includes('costialitas') || nombre.includes('para dos')) return 2;
            if (nombre.includes('costilla')) return 1;

            // L√≥gica para Alitas: Extraer el n√∫mero del nombre (ej: "Combo 12 alitas" -> 12)
            const match = nombre.match(/(\d+)/); 
            if (!match) return 1; // Si no encuentra n√∫mero, devuelve 1 por defecto

            const cantidad = parseInt(match[0]);

            if (cantidad >= 40) return 4;
            if (cantidad >= 24) return 3; // Cubre 24 y 30
            if (cantidad >= 12) return 2; // Cubre 12 y 18
            
            // Para 3, 6, 8 y cualquier otro menor
            return 1;
        }
        // Crear botones de salsas
        const salsaOpciones = document.getElementById('salsa-opciones');
        const tituloModal = document.querySelector('#salsa-modal h3'); // Referencia al t√≠tulo del modal

        salsasDisponibles.forEach(salsa => {
            const btn = document.createElement('button');
            btn.textContent = salsa;
            btn.classList.add('salsa-btn');

            btn.addEventListener('click', () => {
                // 1. Obtener l√≠mite permitido para el producto actual
                const limite = calcularLimiteSalsas(productoPendiente.nombre);
                
                // 2. Contar cu√°ntas hay seleccionadas ACTUALMENTE
                const seleccionadas = document.querySelectorAll('.salsa-btn.active').length;

                // 3. L√≥gica de bloqueo
                if (btn.classList.contains('active')) {
                    // Si ya estaba activa, permitir desmarcar siempre
                    btn.classList.remove('active');
                } else {
                    // Si intenta marcar una nueva, verificar el l√≠mite
                    if (seleccionadas < limite) {
                        btn.classList.add('active');
                    } else {
                        // BLOQUEAR Y AVISAR
                        alert(`Para "${productoPendiente.nombre}" solo puedes elegir ${limite} salsa(s).`);
                        
                        // Opcional: Efecto visual de error
                        btn.style.transform = "translateX(5px)";
                        setTimeout(() => btn.style.transform = "none", 100);
                    }
                }
            });

            salsaOpciones.appendChild(btn);
        });
        

        // Click en productos
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', () => {
                preguntarTipoPedido();
                const nombre = item.querySelector('h3').innerText;
                const precio = parseFloat(
                    item.querySelector('.price')?.innerText.replace('$', '')
                ) || 0;

                const esAlitasOCostillas =
                    item.closest('#alitas') || item.closest('#costillas');

                if (esAlitasOCostillas) {
                    let empaquesProducto = 0;

                    if (tipoPedido === 'llevar') {
                        empaquesProducto = obtenerEmpaquesPorProducto(item);
                    }

                    productoPendiente = {
                        nombre,
                        precio,
                        empaques: empaquesProducto
                    };

                    abrirModalSalsa();
                } else {
                    let empaquesProducto = 0;

                    if (tipoPedido === 'llevar') {
                        empaquesProducto = obtenerEmpaquesPorProducto(item);
                        empaques += empaquesProducto;
                        total += empaquesProducto * costoEmpaque;
                    }
                    pedido.push({ nombre, precio, salsas: [] ,
                                empaques: empaquesProducto
                    });
                    total += precio;
                    actualizarPedido();
                }
            });
        });

        // Click en BEBIDAS
        // ==========================================
        // L√ìGICA DE BEBIDAS Y SABORES
        // ==========================================

        const saboresJugos = [
            'Mora', 
            'Maracuy√°', 
            'Lim√≥n', 
            'Pi√±a', 
            'Frutilla', 
            'Guan√°bana', 
            'Coco'
        ];

        // 1. Generar botones dentro del modal de sabor (al cargar la p√°gina)
        const saborOpcionesDiv = document.getElementById('sabor-opciones');
        saboresJugos.forEach(sabor => {
            const btn = document.createElement('button');
            btn.textContent = sabor;
            btn.classList.add('salsa-btn', 'sabor-btn'); // Usamos estilos de salsa-btn para ahorrar CSS

            // L√≥gica de selecci√≥n √∫nica (tipo radio button)
            btn.addEventListener('click', () => {
                // Desmarcar todos los otros sabores
                document.querySelectorAll('.sabor-btn').forEach(b => b.classList.remove('active'));
                // Marcar este
                btn.classList.add('active');
            });

            saborOpcionesDiv.appendChild(btn);
        });

        // 2. Click en botones de Bebidas (Men√∫ Principal)
        document.querySelectorAll('.drink-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                preguntarTipoPedido();

                const nombreBase = btn.dataset.nombre;
                const precio = parseFloat(btn.dataset.precio);
                const requiereSabor = btn.dataset.sabor === 'true';

                // Si requiere sabor, guardamos datos y ABRIMOS MODAL
                if (requiereSabor) {
                    productoPendiente = {
                        nombre: nombreBase,
                        precio: precio,
                        esBebida: true,
                        empaques: 0 // Asumimos 0 empaque extra en bebida, o ajusta si es necesario
                    };
                    abrirModalSabor();
                    return; // Detenemos aqu√≠, el modal se encarga del resto
                }

                // --- L√≥gica para bebidas SIN sabor (Agua, Colas, Cervezas) ---
                // (Mantenemos tu l√≥gica original de toggle para cosas simples)
                btn.classList.toggle('active');
                
                const index = pedido.findIndex(p => p.nombre === nombreBase && p.esBebida);

                if (index === -1) {
                    // Agregar
                    pedido.push({
                        nombre: nombreBase,
                        precio: precio,
                        salsas: [],
                        empaques: 0,
                        esBebida: true
                    });
                    total += precio;
                } else {
                    // Quitar
                    total -= pedido[index].precio;
                    pedido.splice(index, 1);
                }
                actualizarPedido();
            });
        });

        // 3. Funciones del Modal de Sabor
        function abrirModalSabor() {
            const modal = document.getElementById('sabor-modal');
            modal.style.display = 'flex';
            // Limpiar selecci√≥n previa
            document.querySelectorAll('.sabor-btn').forEach(b => b.classList.remove('active'));
        }

        document.getElementById('cancelar-sabor').addEventListener('click', () => {
            document.getElementById('sabor-modal').style.display = 'none';
            productoPendiente = null;
        });

        document.getElementById('confirmar-sabor').addEventListener('click', () => {
            const saborSeleccionadoBtn = document.querySelector('.sabor-btn.active');
            
            if (!saborSeleccionadoBtn) {
                alert('Por favor, selecciona un sabor.');
                return;
            }

            const sabor = saborSeleccionadoBtn.textContent;
            const nombreFinal = `${productoPendiente.nombre} (${sabor})`;

            // Agregamos al pedido
            pedido.push({
                nombre: nombreFinal,
                precio: productoPendiente.precio,
                salsas: [],
                empaques: 0,
                esBebida: true
            });

            total += productoPendiente.precio;
            actualizarPedido();
            
            // Cerrar modal
            document.getElementById('sabor-modal').style.display = 'none';
            productoPendiente = null;
        });

        // Click en EXTRAS
        document.querySelectorAll('.extra-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation(); // evita conflictos

                preguntarTipoPedido();

                const nombre = btn.dataset.nombre;
                const precio = parseFloat(btn.dataset.precio);

                // Toggle visual
                btn.classList.toggle('active');

                // Ver si ya existe el extra
                const index = pedido.findIndex(
                    p => p.nombre === nombre && p.esExtra
                );

                if (index === -1) {
                    // AGREGAR EXTRA
                    pedido.push({
                        nombre: nombre,
                        precio: precio,
                        salsas: [],
                        empaques: 0,
                        esExtra: true
                    });
                    total += precio;
                } else {
                    // QUITAR EXTRA
                    total -= pedido[index].precio;
                    pedido.splice(index, 1);
                }

                actualizarPedido();
            });
        });


        // Modal
        function abrirModalSalsa() {
            const modal = document.getElementById('salsa-modal');
            modal.style.display = 'flex';
            
            // Limpiar selecciones anteriores
            document.querySelectorAll('.salsa-btn').forEach(b => b.classList.remove('active'));

            // --- NUEVO: Mostrar al cliente cu√°ntas puede elegir ---
            const limite = calcularLimiteSalsas(productoPendiente.nombre);
            const titulo = modal.querySelector('h3');
            titulo.innerText = `Selecciona tus salsas (M√°ximo: ${limite})`;
            // -----------------------------------------------------
        }

        document.getElementById('cancelar-salsa').addEventListener('click', () => {
            cerrarModal();
        });

        document.getElementById('confirmar-salsa').addEventListener('click', () => {
            const salsasSeleccionadas = Array.from(
                document.querySelectorAll('.salsa-btn.active')
            ).map(b => b.textContent);

            if (salsasSeleccionadas.length === 0) {
                alert('Selecciona al menos una salsa');
                return;
            }

            pedido.push({
                nombre: productoPendiente.nombre,
                precio: productoPendiente.precio,
                salsas: salsasSeleccionadas,
                empaques: productoPendiente.empaques
            });

            total += productoPendiente.precio;

            if (tipoPedido === 'llevar' && productoPendiente.empaques > 0) {
                empaques += productoPendiente.empaques;
                total += productoPendiente.empaques * costoEmpaque;
            }

            actualizarPedido();
            cerrarModal();
        });

        function cerrarModal() {
            document.getElementById('salsa-modal').style.display = 'none';
            productoPendiente = null;
        }

        // Actualizar caja del pedido
        function actualizarPedido() {
            const lista = document.getElementById('pedido-lista');
            const totalBox = document.getElementById('pedido-total');

            lista.innerHTML = '';

            pedido.forEach((p, index) => {
                const li = document.createElement('li');

                const texto = document.createElement('span');
                texto.textContent = `‚Ä¢ ${p.nombre}${p.salsas && p.salsas.length ? ' | Salsas: ' + p.salsas.join(', ') : ''} - $${p.precio.toFixed(2)}`;



                const btnRemove = document.createElement('button');
                btnRemove.innerHTML = '‚ùå';
                btnRemove.classList.add('remove-item');

                btnRemove.addEventListener('click', () => {
                    quitarProducto(index);
                });

                li.appendChild(texto);
                li.appendChild(btnRemove);
                lista.appendChild(li);
            });
            if (tipoPedido === 'llevar' && empaques > 0) {
                const li = document.createElement('li');
                li.textContent = `üì¶ Empaques (${empaques}) - $${(empaques * costoEmpaque).toFixed(2)}`;
                lista.appendChild(li);
            }
            totalBox.innerHTML = `<strong>Total:</strong> $${total.toFixed(2)}`;
        }

        // Quitar producto
        function quitarProducto(index) {
            total -= pedido[index].precio;

            if (tipoPedido === 'llevar' && pedido[index].empaques) {
                empaques -= pedido[index].empaques;
                total -= pedido[index].empaques * costoEmpaque;
            }

            pedido.splice(index, 1);
            actualizarPedido();
        }


        // Enviar a WhatsApp
        document.getElementById('enviar-whatsapp').addEventListener('click', () => {
            if (pedido.length === 0) {
                alert('Selecciona al menos un producto');
                return;
            }

            let mensaje = 'Hola üëã, quiero hacer el siguiente pedido:%0A%0A';

            pedido.forEach(p => {
                mensaje += `- ${p.nombre}`;
                if (p.salsas && p.salsas.length) {
                    mensaje += ` (Salsas: ${p.salsas.join(', ')})`;
                }
                mensaje += ` - $${p.precio.toFixed(2)}%0A`;
            });

            mensaje += `%0A*Total:* $${total.toFixed(2)}`;
            
            if (tipoPedido === 'llevar') {
                mensaje += `%0Aüì¶ Empaques: ${empaques} ($${(empaques * costoEmpaque).toFixed(2)})`;
            }
            const telefono = '593999058976'; // cambia si deseas
            const url = `https://wa.me/${telefono}?text=${mensaje}`;

            window.open(url, '_blank');

        });
        














        /* ==============================
        PROMOCIONES DEL DIA
        ================================ */

        const dias = [
            'domingo',
            'lunes',
            'martes',
            'miercoles',
            'jueves',
            'viernes',
            'sabado'
        ];

        const hoyIndex = new Date().getDay();
        const hoy = dias[hoyIndex];

        // Mostrar dia actual
        document.getElementById('promo-dia').innerText =
            `(Hoy: ${hoy.charAt(0).toUpperCase() + hoy.slice(1)})`;

        const promociones = [
            {
                nombre: 'Promoci√≥n 1 Hamburguesa Mega',
                descripcion: 'Hamburguesa Mega + 4 Alitas (1 salsa) + Papa + Gaseosa Mediana (500 ml)',
                precio: 7.99,
                dias: ['lunes','martes','miercoles','jueves','viernes','sabado','domingo'],
                empaques: 2
            },
            {
                nombre: 'Promoci√≥n 2 Hamburguesas',
                descripcion: '2 Hamburguesas + 6 Alitas (1 salsa) + Papas + 2 Gaseosas personales (300ml)',
                precio: 8.99,
                dias: ['lunes','martes','miercoles','jueves'],
                empaques: 1
            },
            {
                nombre: 'Promoci√≥n 3 (24 Alitas)',
                descripcion: '24 Alitas (3 salsas) + Papas + Ensalada + Pepsi 2L',
                precio: 17.00,
                dias: ['lunes','martes','miercoles','jueves'],
                empaques: 4
            },
            {
                nombre: 'Promoci√≥n 4 (30 Alitas)',
                descripcion: '30 Alitas (3 salsas) + Papas + Ensalada + Pepsi 2L',
                precio: 19.99,
                dias: ['lunes','martes','miercoles','jueves','viernes','sabado','domingo'],
                empaques: 4
            },
            {
                nombre: 'Promoci√≥n 5 (18 Alitas)',
                descripcion: '18 Alitas (2 salsas)',
                precio: 13.99,
                dias: ['lunes','martes','miercoles','jueves','viernes'],
                empaques: 2
            }
        ];

        const promoContainer = document.getElementById('promos-container');

        promociones
            .filter(p => p.dias.includes(hoy))
            .forEach(promo => {
                const div = document.createElement('div');
                div.classList.add('menu-item', 'featured');
                

                //--- AGREGAR ESTA L√çNEA AQU√ç ---
                div.dataset.empaques = promo.empaques; 
                // -------------------------------

                
                div.innerHTML = `
                    <h3>${promo.nombre}</h3>
                    <p>${promo.descripcion}</p>
                    <span class="price">$${promo.precio.toFixed(2)}</span>
                `;

                // Permitir agregar al pedido
                div.addEventListener('click', () => {
                    preguntarTipoPedido();
                    
                    // Calculamos los empaques que tendr√≠a este producto
                    const cantidadEmpaques = promo.empaques || 1;
                    const empaquesAUsar = (tipoPedido === 'llevar') ? cantidadEmpaques : 0;

                    // Preparamos el producto pendiente (IGUAL que con las alitas normales)
                    productoPendiente = {
                        nombre: promo.nombre,
                        precio: promo.precio,
                        empaques: empaquesAUsar
                    };

                    // Abrimos el modal para que elija salsas
                    abrirModalSalsa();
                });

                promoContainer.appendChild(div);
            });


    </script>




</body>
</html>
